{"version":3,"file":"Bar.js","sourceRoot":"","sources":["../app/blocks/Bar.ts"],"names":[],"mappings":";AAAA,+FAA+F;;AAI/F,IAAM,OAAO,GAAG,kBAAkB,CAAC;AAEnC,IAAM,QAAQ,GAAG,qCACU,OAAO,2SAajC,CAAC;AAEF,IAAM,aAAa,GAAG,iCACC,OAAO,OAC7B,CAAC;AAEF,kBAAe;IACb,QAAQ,EAAE,CAAC,aAAa,CAAC,EAAE,iDAAiD;IAC5E,KAAK,EAAE,CAAC,QAAQ,CAAC,EAAE,kFAAkF;CAC5F,CAAC","sourcesContent":["// Example Block that creates a materialized view that aggregates daily statistics from Bar_0_0\n\nimport { Blocks } from \"@514labs/moose-lib\"; // Import Blocks to structure setup/teardown queries\n\nconst MV_NAME = \"BarAggregated_MV\";\n\nconst MV_QUERY = `\nCREATE MATERIALIZED VIEW ${MV_NAME}\nENGINE = MergeTree()\nORDER BY dayOfMonth\nPOPULATE\nAS\nSELECT\n  toDayOfMonth(utcTimestamp) as dayOfMonth,\n  count(primaryKey) as totalRows,\n  countIf(hasText) as rowsWithText,\n  sum(textLength) as totalTextLength,\n  max(textLength) as maxTextLength\nFROM Bar_0_0\nGROUP BY dayOfMonth\n`;\n\nconst DROP_MV_QUERY = `\nDROP TABLE IF EXISTS ${MV_NAME}\n`;\n\nexport default {\n  teardown: [DROP_MV_QUERY], // SQL to drop the materialized view if it exists\n  setup: [MV_QUERY], // SQL to create a materialized view that aggregates daily statistics from Bar_0_0\n} as Blocks;\n\n"]}